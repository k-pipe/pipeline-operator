apiVersion: pipeline.k-pipe.cloud/v1
kind: PipelineDefinition
metadata:
  labels:
    app.kubernetes.io/name: return-forecast
    app.kubernetes.io/instance: return-forecast
    app.kubernetes.io/part-of: kpipe
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: kpipe
  name: return-forecast-1.0.0
  namespace: k-pipe
spec:
  name: " pipeline-return-forecast"
  version: "1.0.0"
  pipelineStructure:
    jobSteps:
    - id: extract
      config:
        list:
          - 1
          - 2
          - 3
        string: "hello"
      jobSpec:
        image: europe-west3-docker.pkg.dev/breuni-team-admin-ca/docker/returns-forecast-extract
        imagePullPolicy: Always
        serviceAccountName: test-k8s-sa
    - id: preprocess
      config: "This a config B"
      jobSpec:
        image: europe-west3-docker.pkg.dev/breuni-team-admin-ca/docker/returns-forecast-preprocess
        imagePullPolicy: Always
    pipes:
    - from:
        stepId: extract
        name: data.jsonl
      to:
        stepId: preprocess
        name: data.jsonl


